// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "mongodb"
    // NOTE: When using mysql or sqlserver, uncomment the @db.Text annotations in model Account below
    // Further reading:
    // https://next-auth.js.org/adapters/prisma#create-the-prisma-schema
    // https://www.prisma.io/docs/reference/api-reference/prisma-schema-reference#string
    url      = env("DATABASE_URL")
}

enum Gender {
    MALE
    FEMALE
    OTHER
}

enum CarAvailability {
    BOOKED
    AVAILABLE
    UNAVAILABLE
}

enum BookingStatus {
    PAID
    PAID_AND_ONGOING
    PENDIND_PAYMENT
    EXPIRED
}

enum Roles {
    ADMIN
    CLIENT
}

model User {
    id              String    @id @default(auto()) @map("_id") @db.ObjectId
    fullname        String?
    email           String?   @unique
    phone_number    String?   @unique
    username        String?   @unique
    gender          Gender?
    drivers_lisence String?
    insurance       String?
    password        String?
    bookings        Booking[]
    role            Roles     @default(CLIENT)
    createdAt       DateTime  @default(now())
    updatedAt       DateTime  @updatedAt
}

model Car {
    id            String          @id @default(auto()) @map("_id") @db.ObjectId
    name          String
    categoryId    String          @db.ObjectId
    category      CarCategory     @relation(references: [id], fields: [categoryId])
    style         String
    availability  CarAvailability @default(UNAVAILABLE)
    engine        String
    transmission  String
    drive_train   String
    seats         String
    fuel          String
    luggages      String
    daily_price   String
    MPG           String?
    features      String?
    monthly_price String?
    description   String?
    bookings      Booking[]
    createdAt     DateTime        @default(now())
    updatedAt     DateTime        @updatedAt
}

model CarCategory {
    id        String   @id @default(auto()) @map("_id") @db.ObjectId
    name      String
    Car       Car[]
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

model Booking {
    id         String        @id @default(auto()) @map("_id") @db.ObjectId
    start_date DateTime
    end_date   DateTime
    status     BookingStatus
    amount     Int
    userId     String        @db.ObjectId
    user       User          @relation(references: [id], fields: [userId])
    carId      String        @db.ObjectId
    car        Car           @relation(references: [id], fields: [carId])
    createdAt  DateTime      @default(now())
    updatedAt  DateTime      @updatedAt
}
